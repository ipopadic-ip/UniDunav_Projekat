<h3>Izdavanje potvrda</h3>

<form [formGroup]="forma" (ngSubmit)="izdajPotvrdu()">
  <div class="form-group">
    <label>Pretraži studente po broju indeksa:</label>
   <input type="text" class="form-control" [(ngModel)]="pretraga" 
       (ngModelChange)="pretraziStudente()" name="pretraga"
       [ngModelOptions]="{standalone: true}" />
  </div>

  <div class="form-group mt-2">
    <label>Izaberi studenta:</label>
    <select class="form-control" formControlName="studentId">
      <option *ngFor="let s of studenti" [value]="s.id">
        {{ s.brojIndeksa }} – {{ s.ime }} {{ s.prezime }}
      </option>
    </select>
  </div>

  <div class="form-group mt-2">
    <label>Tip potvrde:</label>
    <input type="text" class="form-control" formControlName="tip" />
  </div>

  <div class="form-group mt-2">
    <label>Tekst potvrde:</label>
    <textarea class="form-control" rows="4" formControlName="tekst"></textarea>
  </div>

  <button class="btn btn-success mt-3" type="submit" [disabled]="forma.invalid">Izdaj potvrdu</button>
</form>

<hr />

<h5 class="mt-4">Sve izdate potvrde</h5>
<table class="table table-bordered table-striped mt-2">
  <thead>
    <tr>
      <th>Student</th>
      <th>Broj indeksa</th>
      <th>Tip</th>
      <th>Tekst</th>
      <th>Datum</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of potvrde">
      <td>{{ p.studentIme }}</td>
      <td>{{ p.brojIndeksa }}</td>
      <td>{{ p.tip }}</td>
      <td>{{ p.tekst }}</td>
      <td>{{ p.datumIzdavanja | date: 'dd.MM.yyyy.' }}</td>
    </tr>
  </tbody>
</table>